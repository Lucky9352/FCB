{% extends 'base.html' %}
{% load static %}

{% block title %}Booking Confirmed! - Gaming Cafe{% endblock %}

{% block extra_css %}
<style>
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes bounceIn {
        0%, 20%, 40%, 60%, 80% {
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        0% {
            opacity: 0;
            transform: scale3d(.3, .3, .3);
        }
        20% {
            transform: scale3d(1.1, 1.1, 1.1);
        }
        40% {
            transform: scale3d(.9, .9, .9);
        }
        60% {
            opacity: 1;
            transform: scale3d(1.03, 1.03, 1.03);
        }
        80% {
            transform: scale3d(.97, .97, .97);
        }
        100% {
            opacity: 1;
            transform: scale3d(1, 1, 1);
        }
    }
    
    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
        100% {
            transform: scale(1);
        }
    }
    
    .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out;
    }
    
    .animate-bounce-in {
        animation: bounceIn 1s ease-out;
    }
    
    .animate-pulse-slow {
        animation: pulse 2s infinite;
    }
    
    .success-card {
        @apply bg-white/10 backdrop-blur-lg rounded-xl p-8 border border-white/20 text-center;
    }
    
    .detail-card {
        @apply bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-white/10;
    }
    
    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: #e94560;
        animation: confetti-fall 3s linear infinite;
    }
    
    @keyframes confetti-fall {
        0% {
            transform: translateY(-100vh) rotate(0deg);
            opacity: 1;
        }
        100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
    }
    
    .notification-toast {
        @apply fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-50;
        animation: slideInRight 0.5s ease-out;
    }
    
    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gaming-primary via-gaming-secondary to-gaming-accent relative overflow-hidden">
    <!-- Confetti Animation -->
    <div id="confetti-container" class="absolute inset-0 pointer-events-none"></div>
    
    <!-- Success Content -->
    <div class="relative z-10 max-w-4xl mx-auto px-4 py-16">
        <!-- Success Icon and Message -->
        <div class="success-card animate-bounce-in mb-8">
            <div class="text-6xl mb-6">ðŸŽ‰</div>
            <h1 class="text-4xl font-bold text-white mb-4">Booking Confirmed!</h1>
            <p class="text-xl text-gray-300 mb-6">
                Your gaming session has been successfully booked. Get ready for an amazing experience!
            </p>
            <div class="inline-flex items-center space-x-2 bg-green-500/20 border border-green-400/30 rounded-full px-6 py-3">
                <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse-slow"></div>
                <span class="text-green-300 font-medium">Confirmed & Paid</span>
            </div>
        </div>

        <!-- Booking Details -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Main Details -->
            <div class="detail-card animate-fade-in-up" style="animation-delay: 0.2s;">
                <h2 class="text-2xl font-bold text-white mb-6">Booking Details</h2>
                
                <div class="space-y-4">
                    <div class="flex justify-between items-center py-3 border-b border-white/10">
                        <span class="text-gray-300">Booking ID</span>
                        <span class="text-white font-mono text-sm">{{ booking.id }}</span>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-white/10">
                        <span class="text-gray-300">Gaming Station</span>
                        <div class="text-right">
                            <p class="text-white font-medium">{{ booking.gaming_station.name }}</p>
                            <p class="text-gray-400 text-sm">{{ booking.gaming_station.get_station_type_display }}</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-white/10">
                        <span class="text-gray-300">Date</span>
                        <span class="text-white font-medium">{{ booking.start_time|date:"l, F j, Y" }}</span>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-white/10">
                        <span class="text-gray-300">Time</span>
                        <span class="text-white font-medium">{{ booking.start_time|date:"g:i A" }} - {{ booking.end_time|date:"g:i A" }}</span>
                    </div>
                    <div class="flex justify-between items-center py-3 border-b border-white/10">
                        <span class="text-gray-300">Duration</span>
                        <span class="text-white font-medium">{{ booking.duration_hours|floatformat:1 }} hour{{ booking.duration_hours|floatformat:1|add:"0"|length|add:"-1"|slice:"1:" }}s</span>
                    </div>
                    <div class="flex justify-between items-center py-3">
                        <span class="text-gray-300">Total Paid</span>
                        <span class="text-gaming-highlight font-bold text-xl">â‚¹{{ booking.total_amount }}</span>
                    </div>
                </div>
            </div>

            <!-- What's Next -->
            <div class="detail-card animate-fade-in-up" style="animation-delay: 0.4s;">
                <h2 class="text-2xl font-bold text-white mb-6">What's Next?</h2>
                
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gaming-highlight rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <span class="text-white font-bold text-sm">1</span>
                        </div>
                        <div>
                            <h3 class="text-white font-medium">Confirmation Email</h3>
                            <p class="text-gray-300 text-sm">Check your email for booking confirmation and details.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gaming-highlight rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <span class="text-white font-bold text-sm">2</span>
                        </div>
                        <div>
                            <h3 class="text-white font-medium">Arrive Early</h3>
                            <p class="text-gray-300 text-sm">Please arrive 10 minutes before your session starts.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gaming-highlight rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <span class="text-white font-bold text-sm">3</span>
                        </div>
                        <div>
                            <h3 class="text-white font-medium">Bring ID</h3>
                            <p class="text-gray-300 text-sm">Don't forget to bring a valid ID for verification.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gaming-highlight rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <span class="text-white font-bold text-sm">4</span>
                        </div>
                        <div>
                            <h3 class="text-white font-medium">Enjoy Gaming!</h3>
                            <p class="text-gray-300 text-sm">Our staff will guide you to your station and help you get started.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6 animate-fade-in-up" style="animation-delay: 0.6s;">
            <a href="{% url 'booking:my_bookings' %}" 
               class="bg-gaming-highlight hover:bg-gaming-highlight/80 text-white px-8 py-4 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-center">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                    </svg>
                    <span>View My Bookings</span>
                </div>
            </a>
            
            <a href="{% url 'booking:selection' %}" 
               class="bg-white/10 hover:bg-white/20 text-white border border-white/20 hover:border-white/40 px-8 py-4 rounded-lg font-medium transition-all duration-200 text-center">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"></path>
                    </svg>
                    <span>Book Another Session</span>
                </div>
            </a>
            
            <a href="{% url 'authentication:customer_dashboard' %}" 
               class="bg-white/10 hover:bg-white/20 text-white border border-white/20 hover:border-white/40 px-8 py-4 rounded-lg font-medium transition-all duration-200 text-center">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                    </svg>
                    <span>Back to Dashboard</span>
                </div>
            </a>
        </div>

        <!-- Contact Information -->
        <div class="detail-card mt-8 animate-fade-in-up" style="animation-delay: 0.8s;">
            <h2 class="text-xl font-bold text-white mb-4">Need Help?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                <div>
                    <div class="text-gaming-highlight mb-2">
                        <svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                        </svg>
                    </div>
                    <p class="text-white font-medium">(555) 123-4567</p>
                    <p class="text-gray-400 text-sm">Call us</p>
                </div>
                <div>
                    <div class="text-gaming-highlight mb-2">
                        <svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                        </svg>
                    </div>
                    <p class="text-white font-medium">info@gamingcafe.com</p>
                    <p class="text-gray-400 text-sm">Email us</p>
                </div>
                <div>
                    <div class="text-gaming-highlight mb-2">
                        <svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <p class="text-white font-medium">123 Gaming Street</p>
                    <p class="text-gray-400 text-sm">Visit us</p>
                </div>
            </div>
        </div>
    </div>

    <!-- In-app Notification Toast -->
    <div id="notification-toast" class="notification-toast hidden">
        <div class="flex items-center space-x-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span>Confirmation email sent!</span>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Create confetti animation
    createConfetti();
    
    // Show notification toast
    setTimeout(showNotificationToast, 2000);
    
    // Auto-hide toast after 5 seconds
    setTimeout(hideNotificationToast, 7000);
});

function createConfetti() {
    const container = document.getElementById('confetti-container');
    const colors = ['#e94560', '#00d4aa', '#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1'];
    
    for (let i = 0; i < 50; i++) {
        setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDelay = Math.random() * 3 + 's';
            confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            
            container.appendChild(confetti);
            
            // Remove confetti after animation
            setTimeout(() => {
                if (confetti.parentNode) {
                    confetti.parentNode.removeChild(confetti);
                }
            }, 5000);
        }, i * 100);
    }
}

function showNotificationToast() {
    const toast = document.getElementById('notification-toast');
    toast.classList.remove('hidden');
}

function hideNotificationToast() {
    const toast = document.getElementById('notification-toast');
    toast.classList.add('hidden');
}
</script>
{% endblock %}